<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Details | Al-Malik Group - Japanese Cars in Uganda</title>
    <meta name="description" content="Buy this car in Uganda. View full specs, features, price, and get it cleared and delivered fast by Al-Malik Group.">
    <script src="https://kit.fontawesome.com/1e29736556.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="details.css">
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FVH9YCRKCP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FVH9YCRKCP');
</script>

<body>
    <nav>
        <div class="top-bar">
            <div class="contact">
                <a href="tel:+256701760786"><p><i class="fas fa-phone-alt"></i><strong>Call: </strong> +256 701 160786</p></a>
                <a href="mailto:malikharis2089@gmail.com"><p><i class="fas fa-envelope"></i><strong>E-Mail: </strong> malikharis2089@gmail.com</p></a>
                <a href="https://www.google.com/maps/place/Al+Malik+Group/@0.3256178,32.6060037,17z/data=!3m1!4b1!4m6!3m5!1s0x177dbb563f7a1ea9:0x3d9296aff92f93a4!8m2!3d0.3256124!4d32.6085786!16s%2Fg%2F11j5fytydb?entry=ttu&g_ep=EgoyMDI1MDYxNS4wIKXMDSoASAFQAw%3D%3D" target="_blank"><p><i class="fas fa-map-marker-alt"></i><strong>Location: </strong> Al-Malik Group</p></a>
            </div>
            <div class="socials">
                <i class="fa-brands fa-facebook"></i>
                <i class="fa-brands fa-twitter"></i>
                <i class="fa-brands fa-square-instagram"></i>
                <i class="fa-brands fa-linkedin"></i>
            </div>
        </div>
        <div class="main-nav">
            <div class="logo">
                <img src="Website Pictures/Website/Logo.jpeg" alt="Al-Malik Group Logo">
                <h1>Al-<span>Malik</span> Group</h1>
            </div>
            <div class="navitems">
                <a href="index.html"><h3>Home</h3></a>
                <a href="aboutUs.html"><h3>About Us</h3></a>
                <a href="clearing.html"><h3>Clearing</h3></a>
                <a href="contact.html"><h3>Contact Us</h3></a>
                <a href="inventory.html"><button>
                    <i class="fas fa-car"></i>
                    <h3>View Cars</h3>
                </button></a>
            </div>
        </div>
    </nav>

    <section class="vehicle-details">
        <div class="container">
            <div id="vehicle-loading" class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Loading vehicle details...</p>
            </div>

            <div id="vehicle-content" style="display: none;">
                <div class="vehicle-header">
                    <div>
                        <span id="vehicle-status" class="vehicle-status">Available</span>
                        <h1 id="vehicle-title" class="vehicle-title">Vehicle Title</h1>
                    </div>
                </div>

                <div class="vehicle-content">
                    <div class="gallery">
                        <div class="main-image">
                            <img id="main-img" src="" alt="Vehicle Image">
                            <button class="thumb-scroll left" onclick="changeImage(-1)">❮</button>
                            <button class="thumb-scroll right" onclick="changeImage(1)">❯</button>
                        </div>
                        <div class="thumbnails" id="thumbnails"></div>
                    </div>

                    <div class="vehicle-info">
                        <h2>Vehicle Specifications</h2>
                        <p id="vehicle-description" class="vehicle-description">Vehicle description will load here...</p>
                        <div class="specs-grid">
                            <!-- spec items unchanged -->
                            <div class="spec-item" data-spec="year">
                                <div class="spec-icon"><i class="fas fa-calendar-alt"></i></div>
                                <div class="spec-text"><h4>Year</h4><p></p></div>
                            </div>
                            <div class="spec-item" data-spec="mileage">
                                <div class="spec-icon"><i class="fas fa-tachometer-alt"></i></div>
                                <div class="spec-text"><h4>Mileage</h4><p></p></div>
                            </div>
                            <div class="spec-item" data-spec="fuelType">
                                <div class="spec-icon"><i class="fas fa-gas-pump"></i></div>
                                <div class="spec-text"><h4>Fuel Type</h4><p></p></div>
                            </div>
                            <div class="spec-item" data-spec="transmission">
                                <div class="spec-icon"><i class="fas fa-cogs"></i></div>
                                <div class="spec-text"><h4>Transmission</h4><p></p></div>
                            </div>
                            <div class="spec-item" data-spec="color">
                                <div class="spec-icon"><i class="fas fa-paint-brush"></i></div>
                                <div class="spec-text"><h4>Color</h4><p></p></div>
                            </div>
                            <div class="spec-item" data-spec="bodyType">
                                <div class="spec-icon"><i class="fas fa-car"></i></div>
                                <div class="spec-text"><h4>Body Type</h4><p></p></div>
                            </div>
                            <div class="spec-item" data-spec="driveType">
                                <div class="spec-icon"><i class="fas fa-road"></i></div>
                                <div class="spec-text"><h4>Drive Type</h4><p></p></div>
                            </div>
                            <div class="spec-item" data-spec="doors">
                                <div class="spec-icon"><i class="fas fa-door-open"></i></div>
                                <div class="spec-text"><h4>Doors</h4><p></p></div>
                            </div>
                        </div>
                        <div class="features">
                            <h3>Key Features</h3>
                            <div id="features-grid" class="features-grid"></div>
                        </div>
                    </div>
                </div>

                <div class="contact-form">
                    <h3>Inquire About This Vehicle</h3>
                    <form id="inquiry-form"
                          action="https://formsubmit.co/ajax/malikharis2089@gmail.com"
                          method="POST">
                        <input type="hidden" name="_captcha" value="false">
                        <input type="hidden" name="_next" id="next-input">
                        <input type="hidden" name="_template" value="table">
                        <input type="hidden" name="_subject" value="New Vehicle Inquiry">
                        <input type="hidden" name="_autoresponse" value="Thank you for your inquiry! We'll contact you shortly.">

                        <!-- your hidden vehicle fields -->
                        <input type="hidden" name="vehicle_id"          id="vehicle-id-input">
                        <input type="hidden" name="vehicle_title"       id="vehicle-title-input">
                        <input type="hidden" name="vehicle_year" id="vehicle-year-input">
                        <input type="hidden" name="vehicle_mileage" id="vehicle-mileage-input">

                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">Full Name</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="location">Location</label>
                                <input type="text" id="location" name="location" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="message">Your Message</label>
                            <textarea id="message" name="message" rows="4" placeholder="I'm interested in this vehicle and would like to know more..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="preferred-contact">Preferred Contact Method</label>
                            <select id="preferred-contact" name="preferred_contact">
                                <option value="phone">Phone Call</option>
                                <option value="email">Email</option>
                                <option value="whatsapp">WhatsApp</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">Send Inquiry</button>
                    </form>
                </div>
            </div>

            <div id="vehicle-error" class="loading" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i>
                <p>Vehicle not found. Please check the URL or return to our <a href="index.html">inventory</a>.</p>
            </div>
        </div>
    </section>

    <!-- Thank You Modal -->
    <div id="thankYouModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Thank You!</h5>
          <button type="button" class="btn-close">&times;</button>
        </div>
        <div class="modal-body">
          <p>Thank you for inquiring! Give us time and we will respond.</p>
        </div>
      </div>
    </div>

    <footer>
        <div class="footer-content">
            <!-- footer unchanged -->
            <div class="footer-column">
                <h3>About Al-Malik</h3>
                <p>With over a decade of experience, Al-Malik Group has established itself as a leader in premium automotive solutions in East Africa.</p>
                <div class="socials">
                    <i class="fa-brands fa-facebook"></i>
                    <i class="fa-brands fa-twitter"></i>
                    <i class="fa-brands fa-square-instagram"></i>
                    <i class="fa-brands fa-linkedin"></i>
                </div>
            </div>
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="index.html"><i class="fas fa-chevron-right"></i> Home</a></li>
                    <li><a href="aboutUs.html"><i class="fas fa-chevron-right"></i> About Us</a></li>
                    <li><a href="clearing.html"><i class="fas fa-chevron-right"></i> Clearing</a></li>
                    <li><a href="inventory.html"><i class="fas fa-chevron-right"></i> Vehicle Inventory</a></li>
                    <li><a href="contact.html"><i class="fas fa-chevron-right"></i> Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Our Services</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Vehicle Import</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Customs Clearance</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Pre-Purchase Inspection</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Shipping & Logistics</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> After-Sales Support</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Contact Info</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-map-marker-alt"></i> Star Auto Paradise, Kampala, Uganda</a></li>
                    <li><a href="tel:+256701760786"><i class="fas fa-phone-alt"></i> +256 701 160786</a></li>
                    <li><a href="mailto:malikharis2089@gmail.com"><i class="fas fa-envelope"></i> malikharis2089@gmail.com</a></li>
                    <li><a href="#"><i class="fas fa-clock"></i> Mon-Fri: 8:00 AM - 6:00 PM</a></li>
                    <li><a href="#"><i class="fas fa-clock"></i> Sat: 9:00 AM - 4:00 PM</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Al-Malik Group. All Rights Reserved. Designed with <i class="fas fa-heart" style="color: #e74c3c;"></i> for Auto Excellence</p>
            <p>&copy; Developed By: HARIS MALIK</p>
        </div>
    </footer>

    <script>
        let currentIndex = 0, vehicleImages = [];

        async function loadVehicleDetails() {
            const params = new URLSearchParams(window.location.search);
            const vehicleId = params.get('id');
            if (!vehicleId) return showError('Vehicle ID not specified');

            try {
                const res = await fetch('inventory.json');
                const list = await res.json();
                const v = list.find(x => x.id == vehicleId);
                if (!v) throw Error();

                document.getElementById('vehicle-loading').style.display = 'none';
                document.getElementById('vehicle-content').style.display = 'block';

                // populate UI
                document.getElementById('vehicle-title').textContent = v.title;
                document.getElementById('vehicle-status').textContent = v.status;
                document.getElementById('vehicle-description').textContent = v.description;

                // set up the redirect URL for after form submission
                const urlObj = new URL(window.location.href);
                urlObj.searchParams.set('submitted', 'true');
                document.getElementById('next-input').value = urlObj.toString();

                ['year','mileage','fuelType','transmission','color','bodyType','driveType','doors']
                    .forEach(f => {
                        const el = document.querySelector(`[data-spec="${f}"] p`);
                        if (el) el.textContent = v[f] || 'N/A';
                    });

                // features
                const fg = document.getElementById('features-grid');
                fg.innerHTML = '';
                (v.features||[]).forEach(feat => {
                    const d = document.createElement('div');
                    d.className = 'feature-item';
                    d.innerHTML = `<i class="fas fa-check-circle"></i><span>${feat}</span>`;
                    fg.appendChild(d);
                });

                // hidden inputs
                document.getElementById('vehicle-id-input').value          = v.id;
                document.getElementById('vehicle-title-input').value       = v.title;
                document.getElementById('vehicle-year-input').value = v.year;
                document.getElementById('vehicle-mileage-input').value = v.mileage;

                // image gallery
                vehicleImages = v.images || [];
                currentIndex = 0;
                const mainImg = document.getElementById('main-img');
                mainImg.src = v.mainImage || vehicleImages[0] || '';
                mainImg.alt = v.title;

                const thumbs = document.getElementById('thumbnails');
                thumbs.innerHTML = '';
                vehicleImages.forEach((src,i) => {
                    const t = document.createElement('div');
                    t.className = 'thumbnail'+(i===0?' active':'');
                    const img = document.createElement('img');
                    img.src = src; img.alt = `Thumb ${i+1}`;
                    t.appendChild(img);
                    t.addEventListener('click', ()=>{ currentIndex = i; changeImage(0); });
                    thumbs.appendChild(t);
                });

            } catch {
                showError('Error loading vehicle details');
            }
        }

        // handle AJAX form submission
        document.getElementById('inquiry-form').addEventListener('submit', async e => {
            e.preventDefault();
            const form = e.target;
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending…';

            try {
                const response = await fetch(form.action, {
                    method: 'POST',
                    body: new FormData(form),
                    headers: { 'Accept': 'application/json' }
                });
                const data = await response.json();
                if (data.success) {
                    document.getElementById('thankYouModal').style.display = 'flex';
                    form.reset();
                } else {
                    alert('Failed to send inquiry: ' + (data.message || 'Server error'));
                }
            } catch (error) {
                alert('Network error: ' + error.message);
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Send Inquiry';
            }
        });

        document.querySelector('.btn-close').addEventListener('click', () => {
            document.getElementById('thankYouModal').style.display = 'none';
        });

        function changeImage(dir) {
            if (!vehicleImages.length) return;
            currentIndex = (currentIndex + dir + vehicleImages.length) % vehicleImages.length;
            document.getElementById('main-img').src = vehicleImages[currentIndex];
            document.querySelectorAll('.thumbnail').forEach((t,i) =>
                t.classList.toggle('active', i===currentIndex)
            );
            const act = document.querySelector('.thumbnail.active');
            if (act) act.scrollIntoView({ behavior:'smooth', block:'nearest', inline:'center' });
        }

        function showError(msg) {
            document.getElementById('vehicle-loading').style.display = 'none';
            const err = document.getElementById('vehicle-error');
            err.style.display = 'block';
            err.querySelector('p').textContent = msg;
        }

        window.addEventListener('DOMContentLoaded', () => {
            loadVehicleDetails();

            // show modal if redirected with submitted flag
            const params = new URLSearchParams(window.location.search);
            if (params.get('submitted') === 'true') {
                document.getElementById('thankYouModal').style.display = 'flex';
                params.delete('submitted');
                const cleanUrl = window.location.origin + window.location.pathname + (params.toString()? '?' + params.toString() : '');
                history.replaceState(null, '', cleanUrl);
            }
        });
    </script>
</body>
</html>
